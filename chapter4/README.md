## TCP/IP协议
阿帕网arpanet，使用NCP网络控制协议进行不同计算机之间的通信。
1974 年发表了以**分组、序列化、流量控制、超时和容错**等为核心的一种新型的网络互联协议，一举奠定了 TCP/IP 协议的基础。
ISO定义了OSI 7层参考模型，但发布的时候TCP/IP协议已经成为主流。
- TCP/IP协议是免费或者少量收费的。
- UNIX系统的发展以及socket编程接口的快速推出，让TCP/IP协议在实践中不断完善。

两种网络模型的对应关系：
| OSI参考模型 | TCP/IP协议栈 |
| --- | --- |
| 应用层 | 应用层 |
| 表示层 | |
| 会话层 | |
| 传输层 | 传输层（TCP/UDP） |
| 网络层 | 网际层（IPV4/V6） |
| 数据链路层 | 网络接口层 |
| 物理层 | |

tcp/ip是4层协议，每一层通过若干协议来完成特定的功能，上一层使用下一层的服务。
1. 应用层：**实现应用程序的逻辑**。ping程序, telnet, OSPF, DNS等协议, 作用于**用户空间**。
以下是内核空间，用户空间与内核空间通过socket来交互。
2. 传输层：**为应用层提供端到端的通信**。包含**TCP, UDP, SCTP**协议。负责数据的收发、超时重连等。
3. 网络层：**实现数据包的选路和转发**。WAN通过多级路由器连接主机和不同的局域网，两台主机连接需要经过多个中间路由器。网络层选择这些中间节点，确定两台主机之间的通信路径。对于tcp/ip协议上层而言，两台主机好像是直接连接的，无需关心二者之间的通信拓扑连接关系。包含**ICMP, IP协议**。IP协议选择路由和分发数据包，ICMP协议检测网络连接（Ping）。
4. 数据链路层：**实现了网卡接口的驱动程序**，向上隐藏了不同硬件的实现细节，提供统一的接口。包含**ARP（地址解析）, RARP（逆地址解析）, DataLink**等协议。网络层IP寻址，将IP地址通过ARP协议得到物理地址，数据链路层物理寻址。可以通过RARP协议将硬件地址转换为IP地址（运行RARP服务的管理者存有所有物理地址对应的IP地址）。



